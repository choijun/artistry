!function(t,e){window.llms=window.llms||{},window.llms.admin_settings=function(){this.file_frame=null,this.init=function(){this.bind()},this.bind=function(){var e=this;t(".llms-image-field-upload").length&&(t(".llms-image-field-upload").on("click",function(i){i.preventDefault(),e.image_upload_click(t(this),i)}),t(".llms-image-field-remove").on("click",function(i){i.preventDefault(),e.update_image(t(this),"","")})),t(".llms-gateway-table").length&&t(".llms-gateway-table tbody").sortable({axis:"y",cursor:"move",items:"tr",handle:"td.sort",helper:function(e,i){return i.children().each(function(){t(this).width(t(this).width())}),i},update:function(e,i){t(this).find("td.sort input").each(function(e){t(this).val(e)})}})},this.image_upload_click=function(t,e){var i=this,l=null;if(!l){var a=t.attr("data-frame-title")||LLMS.l10n.translate("Select an Image"),n=t.attr("data-frame-button")||LLMS.l10n.translate("Select Image");l=wp.media.frames.file_frame=wp.media({title:a,button:{text:n},multiple:!1})}l.on("select",function(){var e=l.state().get("selection").first().toJSON();i.update_image(t,e.id,e.url)}),l.open()},this.update_image=function(e,i,l){var a=t("#"+e.attr("data-id")),n=e.prevAll("img.llms-image-field-preview");$remove=e.hasClass("llms-image-field-remove")?e:e.next("input.llms-image-field-remove"),a.val(i),n.attr("src",l),""!==i?$remove.removeClass("hidden"):$remove.addClass("hidden")},this.init()};new window.llms.admin_settings}(jQuery);