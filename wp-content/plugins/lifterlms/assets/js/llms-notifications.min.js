!function(t){var i=function(){function i(){t("body").on("click",".llms-notification-dismiss",function(){r.dismiss(t(this).closest(".llms-notification"))})}function n(t){-1===u.indexOf(t)&&u.push(t)}function s(){clearInterval(a)}function o(t){pump(function(){t&&"unload"===t||!r.has_notifications||r.show_all()})}function e(){a=setInterval(o,f)}var a,r=this,l=window.llms&&window.llms.notification_settings?window.llms.notification_settings:{},f=l.heartbeat_interval?l.heartbeat_interval:2e4,c=[],u=[];return pump=function(t){var i=!!u.length;LLMS.Ajax.call({data:{action:"notifications_heartbeart",dismissals:u},beforeSend:function(){return r.block_ajax?(r.restart_heartbeat=!0,s(),t(),!1):void(r.block_ajax=!0)},complete:function(){r.restart_heartbeat&&(r.restart_heartbeat=!1,e()),r.block_ajax=!1},success:function(n){u=i?[]:u,n.success&&n.data&&r.queue(n.data["new"]),t()}})},this.block_ajax=!1,this.restart_heartbeat=!1,this.init=function(){this.is_user_logged_in()&&(window.onbeforeunload=function(){o("unload")},i(),o(),e())},this.queue=function(t){var i=this;for(var n in t)t.hasOwnProperty(n)&&!1===i.notification_exists(t[n].id)&&c.push(t[n])},this.dismiss=function(t){var i=this;t.removeClass("visible"),n(t.attr("data-id")),setTimeout(function(){i.reposition(t.next(".llms-notification.visible"))},10)},this.notification_exists=function(t){for(var i in c)if(c.hasOwnProperty(i)&&t===c[i].id)return i;return!1},this.get_offset=function(i){var n=12;if(i||(i=t(".llms-notification.visible").last()),!i.offset())return 24;var s=i.offset().top,o=i.outerHeight();return s+o+n},this.has_notifications=function(){return c.length},this.is_user_logged_in=function(){return t("body").hasClass("logged-in")},this.reposition=function(i){var n,s=this,o=".llms-notification.visible";i.length||(i=t(o).first()),i.css("top",s.get_offset(i.prevAll(o).first())),n=i.next(o),n.length&&setTimeout(function(){s.reposition(n)},150)},this.show_all=function(){var t,i=this,n=0;t=setInterval(function(){n<c.length?(c[n].shown||(c[n].shown=!0,i.show_one(c[n])),n++):clearInterval(t)},100)},this.show_one=function(i){var s=this,o=t(i.html);o.find("a").on("click",function(i){i.preventDefault();var s=t(this);n(o.attr("data-id")),window.location=s.attr("href")}),t("body").append(o),o.css("top",s.get_offset()),setTimeout(function(){o.addClass("visible")},1),o.attr("data-auto-dismiss")&&(n(o.attr("data-id")),setTimeout(function(){s.dismiss(o)},o.attr("data-auto-dismiss")))},this.init(),this};window.llms=window.llms||{},window.llms.notifications=new i}(jQuery);