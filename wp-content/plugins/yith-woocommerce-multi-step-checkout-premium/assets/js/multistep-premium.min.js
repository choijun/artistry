(function(a){var e=a("body"),p=a(yith_wcms.dom.login),z=a(yith_wcms.dom.billing),t=a(yith_wcms.dom.shipping),v=a(yith_wcms.dom.order),w=a(yith_wcms.dom.payment),k=a(yith_wcms.dom.form_actions),A=a(yith_wcms.dom.coupon),B=a(yith_wcms.dom.create_account),F=a(yith_wcms.dom.create_account_wrapper),q=[p,z,t,v,w],x=e.hasClass("logged-in");a(yith_wcms.dom.ship_to_different_address);e.on("updated_checkout yith_wcms_myaccount_order_pay",function(b){"updated_checkout"==b.type&&(q[4]=a(yith_wcms.dom.payment));
    4==k.data("step")&&a(yith_wcms.dom.payment).show();e.trigger("yith_wcms_updated_checkout")});e.hasClass("woocommerce-order-pay")&&e.trigger("yith_wcms_myaccount_order_pay");"yes"==yith_wcms.live_fields_validation&&(a(yith_wcms.dom.checkout_form),e.on("blur","input:radio",function(){var b=a(this),c=b.closest(".form-row"),d=!0;c.is(".validate-required")&&("radio"==b.attr("type")&&(b=b.attr("name"),a("input[name="+b+"]").is(":checked")||(c.removeClass("woocommerce-validated").addClass("woocommerce-invalid woocommerce-invalid-required-field"),
    d=!1)),d&&c.removeClass("woocommerce-invalid woocommerce-invalid-required-field").addClass("woocommerce-validated"))}));e.on("yith_wcms_select2",function(b){if(a().select2){var c=function(){a("select.country_select, select.state_select").each(function(){var b={placeholder:a(this).attr("placeholder"),placeholderOption:"first",width:"100%"};a(this).select2(b)})};c();e.bind("country_to_state_changed",function(){c()})}});1!=yith_wcms.wc_shipping_multiple&&e.trigger("yith_wcms_select2");a(".yith-wcms-pro "+
    yith_wcms.dom.checkout_timeline+" li").on("click",function(b){var c=a(this);if(c.hasClass("active"))return!1;b=a(yith_wcms.dom.checkout_timeline).find(yith_wcms.dom.active_timeline).data("step");var d=c.data("step"),h=c.data("step")>b?d-1:c.data("step");c=c.data("step")>b?k.find(yith_wcms.dom.button_next):k.find(yith_wcms.dom.button_prev);"yes"==yith_wcms.remove_shipping_step&&(2==d&&(d+=1),2==h&&--h);if(0==d&&x)return!1;C(c,b,d,h)});k.find(yith_wcms.dom.button_prev).add(yith_wcms.dom.button_next).on("click",
    function(b){b=a(this);var c=k.data("step"),d=c+1,h=c-1;"yes"==yith_wcms.remove_shipping_step&&(2==d&&(d+=1),2==h&&--h);C(b,c,d,h)});var C=function(b,c,d,h){var f=a(yith_wcms.dom.checkout_timeline),l=b.data("action"),y=k.find(yith_wcms.dom.button_prev),u=k.find(yith_wcms.dom.button_next),n=f.find(".active").data("step");b=a(yith_wcms.dom.checkout_form);if("yes"==yith_wcms.is_scroll_top_enabled){var g=a(yith_wcms.dom.scroll_top_anchor);g=g.offset().top-g.outerHeight(!0);e.animate({scrollTop:g},500)}var p=
    function(a){3==a?A.fadeIn(yith_wcms.transition_duration):A.fadeOut(yith_wcms.transition_duration)};"prev"==l&&1==c?u.val(yith_wcms.skip_login_label):u.val(yith_wcms.next_label);if("yes"==yith_wcms.live_fields_validation&&(0==n||1==n||2==n)&&"next"==l){b=a(yith_wcms.dom.checkout_form);g=0;var m=a(yith_wcms.dom.shipping_check);1!=n&&2!=n||b.find(yith_wcms.dom.required_fields_check).trigger("blur");if(1==n||0==n){if(yith_wcms.is_coupon_email_system_enabled&&(g=a(yith_wcms.dom.day_of_birth),"undefined"!=
    typeof g)){m=g.attr("pattern");m=new RegExp("^"+m+"$","g");var r=g.val();""!=r&&0==m.test(r)&&g.parent().removeClass("woocommerce-validated").addClass("woocommerce-invalid-required-field").addClass("woocommerce-invalid")}g=z.find(yith_wcms.dom.wc_invalid_required).size();0==B.length||B.is(":checked")||0==g||(g-=F.find(".validate-required").length)}else if(2==n){r=m.length;if(0!=r&&m.is(":checked")||0==r&&t.find("input").length)g=t.find(yith_wcms.dom.wc_invalid_required).size();yith_wcms.is_wc_checkout_addons_enabled&&
(m=a(yith_wcms.dom.wc_checkout_addons),g+=m.find(yith_wcms.dom.wc_invalid_required).size());m=t.find(yith_wcms.dom.additional_fields).find(">"+yith_wcms.dom.wc_invalid_required).size();g+=m}if(0!=g){if(0!=n)return;d=1}}f.find(".active").removeClass("active");"next"==l?(k.data("step",d),q[c].fadeOut(yith_wcms.transition_duration,function(){q[d].fadeIn(yith_wcms.transition_duration);p(d)}),a(yith_wcms.dom.timeline_id_prefix+d).toggleClass("active")):"prev"==l&&(k.data("step",h),q[c].fadeOut(yith_wcms.transition_duration,
        function(){q[h].fadeIn(yith_wcms.transition_duration)}),p(h),a(yith_wcms.dom.timeline_id_prefix+h).toggleClass("active"));c=k.data("step");1==yith_wcms.use_cookie&&Cookies.set("yith_wcms_checkout_current_step",c,{path:"/"});1==c&&1==x||0==x&&(0==c&&1==yith_wcms.checkout_login_reminder_enabled||1==c&&0==yith_wcms.checkout_login_reminder_enabled)?y.fadeOut(yith_wcms.transition_duration):y.fadeIn(yith_wcms.transition_duration);4==c?(b.removeClass("processing"),u.fadeOut(yith_wcms.transition_duration),
    "yes"==yith_wcms.disabled_prev_button&&y.fadeOut(yith_wcms.transition_duration)):(b.addClass("processing"),u.fadeIn(yith_wcms.transition_duration))};p=Cookies.get("yith_wcms_checkout_form");v=Cookies.get("yith_wcms_checkout_current_step");var D=function(){var b=a(".checkout.woocommerce-checkout").serialize();Cookies.set("yith_wcms_checkout_form",b,{path:"/"})},E=function(){a("#ship-to-different-address input").on("change",function(a){D()});a(yith_wcms.dom.checkout_form).find(yith_wcms.dom.required_fields_check).on("blur change",
    function(a){D()})};w=function(b,c){if("undefined"!=typeof b){var d=b.split("&"),h;for(h in d){var f=d[h];if("string"==typeof f){f=f.split("=");var l=decodeURIComponent('input[name="'+f[0]+'"]');l=a(l);if("undefined"!=typeof l){var e=decodeURIComponent(f[1]).replace(/\+/g," ");if(-1!=yith_wcms.dom.select2_fields.indexOf(f[0]))f=a("#"+decodeURIComponent(f[0])),f.add(l).val(e),f.is("select")?f.val(e).trigger("change"):f.is("input")&&l.val(e);else{var k=!1;-1!=f[0].indexOf("payment_method")&&1==yith_wcms.skip_payment_method&&
(k=!0);-1!=f[0].indexOf("shipping_method")&&1==yith_wcms.skip_shipping_method&&(k=!0);-1==f[0].indexOf("_wp")&&e&&0==k&&("checkbox"==l.prop("type")&&1==e?l.prop("checked","checked"):l.val(e))}}}}}};1==yith_wcms.use_cookie&&(E(),w(p,v),e.on("country_to_state_changed",function(a,c,d){E()}));if("undefined"!=typeof Cookies.get("yith_wcms_checkout_current_step")&&1==yith_wcms.use_cookie)e.on("updated_checkout yith_wcms_myaccount_order_pay",function(){a(".yith-wcms-pro "+yith_wcms.dom.checkout_timeline+
    " li#timeline-"+Cookies.get("yith_wcms_checkout_current_step")).trigger("click")});1==yith_wcms.is_order_received_endpoint&&1==yith_wcms.use_cookie&&(Cookies.remove("yith_wcms_checkout_form",{path:"/"}),Cookies.remove("yith_wcms_checkout_current_step",{path:"/"}))})(jQuery);