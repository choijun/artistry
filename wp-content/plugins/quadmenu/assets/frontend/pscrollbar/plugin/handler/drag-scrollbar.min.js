
"use strict";var _=require("../../lib/helper");var dom=require("../../lib/dom");var instances=require("../instances");var updateGeometry=require("../update-geometry");var updateScroll=require("../update-scroll");function bindMouseScrollXHandler(e,d){var g=null;var c=null;function b(h){var j=g+(h*d.railXRatio);var i=Math.max(0,d.scrollbarXRail.getBoundingClientRect().left)+(d.railXRatio*(d.railXWidth-d.scrollbarXWidth));if(j<0){d.scrollbarXLeft=0}else{if(j>i){d.scrollbarXLeft=i}else{d.scrollbarXLeft=j}}var k=_.toInt(d.scrollbarXLeft*(d.contentWidth-d.containerWidth)/(d.containerWidth-(d.railXRatio*d.scrollbarXWidth)))-d.negativeScrollAdjustment;updateScroll(e,"left",k)}var a=function(h){b(h.pageX-c);updateGeometry(e);h.stopPropagation();h.preventDefault()};var f=function(){_.stopScrolling(e,"x");d.event.unbind(d.ownerDocument,"mousemove",a)};d.event.bind(d.scrollbarX,"mousedown",function(h){c=h.pageX;g=_.toInt(dom.css(d.scrollbarX,"left"))*d.railXRatio;_.startScrolling(e,"x");d.event.bind(d.ownerDocument,"mousemove",a);d.event.once(d.ownerDocument,"mouseup",f);h.stopPropagation();h.preventDefault()})}function bindMouseScrollYHandler(e,d){var c=null;var b=null;function g(h){var i=c+(h*d.railYRatio);var k=Math.max(0,d.scrollbarYRail.getBoundingClientRect().top)+(d.railYRatio*(d.railYHeight-d.scrollbarYHeight));if(i<0){d.scrollbarYTop=0}else{if(i>k){d.scrollbarYTop=k}else{d.scrollbarYTop=i}}var j=_.toInt(d.scrollbarYTop*(d.contentHeight-d.containerHeight)/(d.containerHeight-(d.railYRatio*d.scrollbarYHeight)));updateScroll(e,"top",j)}var a=function(h){g(h.pageY-b);updateGeometry(e);h.stopPropagation();h.preventDefault()};var f=function(){_.stopScrolling(e,"y");d.event.unbind(d.ownerDocument,"mousemove",a)};d.event.bind(d.scrollbarY,"mousedown",function(h){b=h.pageY;c=_.toInt(dom.css(d.scrollbarY,"top"))*d.railYRatio;_.startScrolling(e,"y");d.event.bind(d.ownerDocument,"mousemove",a);d.event.once(d.ownerDocument,"mouseup",f);h.stopPropagation();h.preventDefault()})}module.exports=function(b){var a=instances.get(b);bindMouseScrollXHandler(b,a);bindMouseScrollYHandler(b,a)};