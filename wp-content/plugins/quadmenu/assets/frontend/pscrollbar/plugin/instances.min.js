
"use strict";var _=require("../lib/helper");var cls=require("../lib/class");var defaultSettings=require("./default-setting");var dom=require("../lib/dom");var EventManager=require("../lib/event-manager");var guid=require("../lib/guid");var instances={};function Instance(c){var b=this;b.settings=_.clone(defaultSettings);b.containerWidth=null;b.containerHeight=null;b.contentWidth=null;b.contentHeight=null;b.isRtl=dom.css(c,"direction")==="rtl";b.isNegativeScroll=(function(){var f=c.scrollLeft;var e=null;c.scrollLeft=-1;e=c.scrollLeft<0;c.scrollLeft=f;return e})();b.negativeScrollAdjustment=b.isNegativeScroll?c.scrollWidth-c.clientWidth:0;b.event=new EventManager();b.ownerDocument=c.ownerDocument||document;function a(){cls.add(c,"ps-focus")}function d(){cls.remove(c,"ps-focus")}b.scrollbarXRail=dom.appendTo(dom.e("div","ps-scrollbar-x-rail"),c);b.scrollbarX=dom.appendTo(dom.e("div","ps-scrollbar-x"),b.scrollbarXRail);b.scrollbarX.setAttribute("tabindex",0);b.event.bind(b.scrollbarX,"focus",a);b.event.bind(b.scrollbarX,"blur",d);b.scrollbarXActive=null;b.scrollbarXWidth=null;b.scrollbarXLeft=null;b.scrollbarXBottom=_.toInt(dom.css(b.scrollbarXRail,"bottom"));b.isScrollbarXUsingBottom=b.scrollbarXBottom===b.scrollbarXBottom;b.scrollbarXTop=b.isScrollbarXUsingBottom?null:_.toInt(dom.css(b.scrollbarXRail,"top"));b.railBorderXWidth=_.toInt(dom.css(b.scrollbarXRail,"borderLeftWidth"))+_.toInt(dom.css(b.scrollbarXRail,"borderRightWidth"));dom.css(b.scrollbarXRail,"display","block");b.railXMarginWidth=_.toInt(dom.css(b.scrollbarXRail,"marginLeft"))+_.toInt(dom.css(b.scrollbarXRail,"marginRight"));dom.css(b.scrollbarXRail,"display","");b.railXWidth=null;b.railXRatio=null;b.scrollbarYRail=dom.appendTo(dom.e("div","ps-scrollbar-y-rail"),c);b.scrollbarY=dom.appendTo(dom.e("div","ps-scrollbar-y"),b.scrollbarYRail);b.scrollbarY.setAttribute("tabindex",0);b.event.bind(b.scrollbarY,"focus",a);b.event.bind(b.scrollbarY,"blur",d);b.scrollbarYActive=null;b.scrollbarYHeight=null;b.scrollbarYTop=null;b.scrollbarYRight=_.toInt(dom.css(b.scrollbarYRail,"right"));b.isScrollbarYUsingRight=b.scrollbarYRight===b.scrollbarYRight;b.scrollbarYLeft=b.isScrollbarYUsingRight?null:_.toInt(dom.css(b.scrollbarYRail,"left"));b.scrollbarYOuterWidth=b.isRtl?_.outerWidth(b.scrollbarY):null;b.railBorderYWidth=_.toInt(dom.css(b.scrollbarYRail,"borderTopWidth"))+_.toInt(dom.css(b.scrollbarYRail,"borderBottomWidth"));dom.css(b.scrollbarYRail,"display","block");b.railYMarginHeight=_.toInt(dom.css(b.scrollbarYRail,"marginTop"))+_.toInt(dom.css(b.scrollbarYRail,"marginBottom"));dom.css(b.scrollbarYRail,"display","");b.railYHeight=null;b.railYRatio=null}function getId(a){return a.getAttribute("data-ps-id")}function setId(a,b){a.setAttribute("data-ps-id",b)}function removeId(a){a.removeAttribute("data-ps-id")}exports.add=function(b){var a=guid();setId(b,a);instances[a]=new Instance(b);return instances[a]};exports.remove=function(a){delete instances[getId(a)];removeId(a)};exports.get=function(a){return instances[getId(a)]};