
(function(b){if(!window.console){console={}}console.log=console.log||function(c,d){};console.error=console.error||function(c){};function a(c){this.options=c;this.deferred=b.Deferred()}a.prototype.invoke=function(){var c=this;less.options.env=quadmenu.debug?"development":"production";less.options.logLevel=0;less.options.useFileCache=true;return less.render('@import "'+c.options.lessPath+'";',c.options).then(function(d){b(document).trigger("quadmenu_compiler_save",[d]);c.deferred.resolve()},function(d){console.log(d);c.deferred.resolve()})};a.prototype.promise=function(){return this.deferred.promise()};b(document).on("quadmenu_compiler_error",function(d,c){alert(c)});b(document).on("quadmenu_compile_success",function(h,g){var d=b(document.getElementById("redux_notification_bar")),c=b(".quadmenu-admin-compiler-alert"),f=c.find('input[name="quadmenu_compiler"]');c.addClass("hidden");f.attr("disabled",true).removeClass("button-critical").addClass("delete");d.append(g).find(".saved_notice").delay(4000).slideUp()});b(document).on("quadmenu_compiler_save",function(d,c){b.ajax({type:"post",dataType:"json",url:ajaxurl,data:{action:"quadmenu_compiler_save",output:c,nonce:quadmenu.nonce,},success:function(e){b(document).delay(4000).trigger("quadmenu_compile_success",[e.notification_bar]);console.log("Compiled ["+c.imports[0]+"]")},error:function(e){b(document).delay(4000).trigger("quadmenu_compiler_error",e.responseText);console.log(e.responseText)},complete:function(g,e,f){}})});b(document).on("quadmenu_compiler_files",function(h,c,l){var i=b(this),k=b(document.getElementById("redux_ajax_overlay")),d=b(".redux-action_bar input").removeAttr("disabled"),f=b(".redux-action_bar .spinner");f.addClass("is-active");k.fadeIn();console.log("Starting compiler!");var g=b.Deferred();g.resolve();var j=[];b.each(c,function(n,m){var e=new a({modifyVars:l,lessPath:m,});b.when(g).then(function(){setTimeout(function(){e.invoke()},200)});g=e;j.push(g)});b.when.apply(b,j).done(function(){k.fadeOut();d.removeAttr("disabled");f.removeClass("is-active");i.trigger("quadmenu_compiler_end");console.log("Ending compiler!")})});b(document).on("ready",function(c){if(typeof(quadmenu)=="undefined"){return}if(quadmenu.compiler!=1){return}if(!quadmenu.variables){return}if(!quadmenu.files){return}b(this).trigger("quadmenu_compiler_files",[quadmenu.files,quadmenu.variables])});b(document).on("ajaxSuccess.redux_save",function(i,j,h){var f=b("#redux-compiler-hook"),g=f.val(),c=b.parseJSON(j.responseText);if(g!=1){return}if(!c.variables){return}try{b(this).trigger("quadmenu_compiler_files",[quadmenu.files,c.variables])}catch(d){alert("Not JSON")}})})(jQuery);